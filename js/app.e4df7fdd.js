(function(t){function e(e){for(var n,r,s=e[0],l=e[1],c=e[2],d=0,m=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,s=1;s<a.length;s++){var l=a[s];0!==i[l]&&(n=!1)}n&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},i={app:0},o=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("85ec"),i=a.n(n);i.a},1:function(t,e){},"3a7d":function(t,e,a){},"567d":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-menu",{staticClass:"main-navigation",attrs:{"default-active":t.$route.path,mode:"horizontal"},on:{select:t.handleSelect}},[a("el-menu-item",{attrs:{index:"/"}},[t._v("首页")]),a("el-menu-item",{attrs:{index:"/nation"}},[t._v("全国")]),a("el-submenu",{attrs:{index:"/province"}},[a("template",{slot:"title"},[t._v("省份")]),t._l(this.$store.state.mainModule.provinceName,(function(e,n){return a("el-menu-item",{key:n,attrs:{index:e}},[t._v(t._s(e))])}))],2)],1),a("router-view")],1)},o=[],r={name:"App",data:function(){return{selectPage:"/",id:"Beijing"}},methods:{handleSelect:function(t,e){"/"==t||"/nation"==t?this.$router.push(t):this.$router.push({path:"/province",query:{provinceName:t}})}},created:function(){this.$store.dispatch("mainModule/setTraffic")}},s=r,l=(a("034f"),a("2877")),c=Object(l["a"])(s,i,o,!1,null,null,null),u=c.exports,d=a("5c96"),m=a.n(d),h=(a("0fae"),a("54ba"),a("2f62")),p=a("8c4f"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"Main"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:20}},[a("div",{attrs:{id:"main-title"}},[t._v("基于疫情和政策的比较与分析")])])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:20}},[a("div",{attrs:{id:"sub-title"}},[t._v("Statistics ｜ Policies ｜ Analysis")])])],1),a("el-row",{attrs:{gutter:20}},[a("el-divider",{attrs:{"content-position":"left"}},[a("el-link",{attrs:{icon:"el-icon-info",underline:"true"},on:{click:function(e){t.isDialogVisible=!0}}},[t._v("关于")])],1)],1),a("el-dialog",{attrs:{title:"关于",visible:t.isDialogVisible,width:"30%",center:"","show-close":""},on:{"update:visible":function(e){t.isDialogVisible=e}}},[a("span",[t._v("这里是本系统的功能介绍和免责声明.")]),a("span",[t._v("但是具体我还没想好写啥")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.isDialogVisible=!1}}},[t._v("我已了解")])],1)])],1)},v=[],g={name:"Main",data:function(){return{isDialogVisible:!1,startTime:0}},created:function(){this.startTime=(new Date).getTime()},destroyed:function(){var t=(new Date).getTime();this.$store.dispatch("mainModule/recordCountTime","main",t)}},C=g,b=(a("c266"),Object(l["a"])(C,f,v,!1,null,null,null)),w=b.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"Nation"}},[a("el-divider",{attrs:{"content-position":"left"}},[a("p",{staticClass:"title"},[t._v("疫情数据")])]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-card",{attrs:{id:"map-card",shadow:"never"}},[a("div",{attrs:{id:"nationMap"}})])],1),a("el-col",{attrs:{span:12}},[a("el-card",{attrs:{id:"table-card",shadow:"never"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.nationTable,border:"",id:"nation-table","cell-style":{"vertical-align":"top"}}},[a("el-table-column",{attrs:{prop:"name",label:"统计类型"}}),a("el-table-column",{attrs:{prop:"value",label:"统计人数"}})],1)],1)],1)],1),a("el-divider"),a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"nationSunBurst"}}),[a("el-carousel",{attrs:{interval:4e3,type:"card",height:"200px"}},t._l(this.carousel,(function(e,n){return a("el-carousel-item",{key:n},t._l(e,(function(e,n){return a("p",{key:n,staticClass:"medium"},[t._v(t._s(e))])})),0)})),1)],a("el-divider",{attrs:{"content-position":"left"}},[a("p",{staticClass:"title"},[t._v("疫情政策")])]),a("div",{attrs:{id:"nationLine"}})],2)},y=[],M=a("313e"),S=a.n(M),$=(a("3139"),{name:"Nation",data:function(){return{carousel:[],nationTable:[],nationMapChart:"",nationSunBurstChart:"",nationLineChart:"",startTime:0,mapOption:{title:{text:"全国最新疫情地图"},series:{name:"确诊人数",type:"map",map:"china",label:{show:!0,color:"#333",fontSize:10},itemStyle:{areaColor:"#eee"},roam:!1,zoom:1.2,emphasis:{label:{color:"#fff",fontSize:12},itemStyle:{areaColor:"#ccc"}},data:[]},visualMap:[{type:"piecewise",show:!0,pieces:[{min:1e4},{min:1e3,max:9999},{min:100,max:999},{min:10,max:99},{min:1,max:9},{max:0}],inRange:{symbol:"rect",color:["#FFD318","#FFAA85","#FF7B69","#CC2929","#8C0D0D","#660208"]},tooltip:{trigger:"item"}}]}}},watch:{"$store.state.mainModule.shouldTotalDataShown":function(){1==this.$store.state.mainModule.shouldTotalDataShown&&this.drawNationTable()},"$store.state.mainModule.shouldNationDataShown":function(){1==this.$store.state.mainModule.shouldNationDataShown&&(this.drawNationMap("nationMap"),this.carousel=this.$store.state.mainModule.carouselData)}},methods:{drawNationMap:function(t){console.log("draw map");for(var e=0;e<this.$store.state.mainModule.provinceCount;e++)this.mapOption.series.data.push({name:this.$store.state.mainModule.nationData[e].provinceShortName,value:this.$store.state.mainModule.nationData[e].confirmedCount});this.nationMapChart=S.a.init(document.getElementById(t)),this.nationMapChart.setOption(this.mapOption)},drawNationTable:function(){this.nationTable=[{name:"现存确诊病例",value:this.$store.state.mainModule.chinaData.currentConfirmedCount},{name:"累计确诊病例",value:this.$store.state.mainModule.chinaData.confirmedCount},{name:"累计疑似病例",value:this.$store.state.mainModule.chinaData.suspectedCount},{name:"累计治愈病例",value:this.$store.state.mainModule.chinaData.curedCount},{name:"累计死亡病例",value:this.$store.state.mainModule.chinaData.deadCount}]},drawNationLine:function(t){console.log("draw line"),this.lineOption.xAxis.data=this.$store.state.mainModule.xAxis,this.lineOption.series[0].data=this.$store.state.mainModule.curedLine,this.lineOption.series[1].data=this.$store.state.mainModule.deadLine,this.nationLineChart=S.a.init(document.getElementById(t)),this.nationLineChart.setOption(this.lineOption)}},created:function(){console.log("create Nation"),this.startTime=(new Date).getTime(),this.$store.dispatch("mainModule/getInstantNationData")},mounted:function(){},destroyed:function(){var t=(new Date).getTime();this.$store.dispatch("mainModule/recordCountTime","nation",t)}}),x=$,T=(a("fcdd"),Object(l["a"])(x,D,y,!1,null,null,null)),P=T.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"Province"}},[a("div",{attrs:{id:"title"}},[t._v(t._s(this.$route.query.provinceName)+"地区疫情情况")]),a("el-divider"),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-card",{attrs:{id:"map-card",shadow:"never"}},[a("div",{attrs:{id:"provincePie"}})])],1),a("el-col",{attrs:{span:12}},[a("el-card",{attrs:{id:"table-card",shadow:"never"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.provinceTable,border:"",id:"province-table","cell-style":{"vertical-align":"top"}}},[a("el-table-column",{attrs:{prop:"name",label:"统计类型"}}),a("el-table-column",{attrs:{prop:"value",label:"统计人数"}})],1)],1)],1)],1),a("el-divider"),a("div",{attrs:{id:"provinceBar"}}),a("el-divider"),a("el-timeline",t._l(t.timelineTitle,(function(e,n){return a("el-timeline-item",{key:n,attrs:{timestamp:t.timeStamp[n],placement:"top"}},[a("el-card",t._l(t.timelineText[n],(function(e,n){return a("div",{key:n,staticClass:"news"},[t._v(" "+t._s(e)+" ")])})),0)],1)})),1)],1)},O=[],_={name:"Province",data:function(){return{timeStamp:this.$store.state.mainModule.timeStamp,timelineTitle:this.$store.state.mainModule.timeStamp,timelineText:this.$store.state.mainModule.timelineText,provinceTable:[],provinceBar:"",provincePie:"",currentConfirmedCount:[],curedCount:[],deadCount:[],emphasisStyle:{itemStyle:{barBorderWidth:1,shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.5)"}},pieOption:{title:{text:"各市区累计确诊数",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"确诊人数",type:"pie",radius:"55%",center:["50%","50%"],data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},barOption:{backgroundColor:"#eee",legend:{data:["现存确诊","累计治愈人数","累计死亡"],left:10},brush:{toolbox:["rect","polygon","lineX","lineY","keep","clear"],xAxisIndex:0},toolbox:{feature:{magicType:{type:["stack,tiled"]},dataView:{}}},tooltip:{},xAxis:{data:[],name:"市区名称",axisLine:{onZero:!0},splitLine:{show:!1},splitArea:{show:!1},axisLabel:{interval:0}},yAxis:{inverse:!1,splitArea:{show:!1}},grid:{left:100},visualMap:{type:"continuous",dimension:1,text:["Max","min"],inverse:!1,itemHeight:200,calculable:!0,min:0,max:500,top:60,left:10,inRange:{colorLightness:[.8,.4]},outOfRange:{color:"#bbb"},controller:{inRange:{color:"#2f4554"}}},series:[{name:"现存确诊",type:"bar",stack:"one",emphasis:this.emphasisStyle,data:[]},{name:"累计治愈人数",type:"bar",stack:"one",emphasis:this.emphasisStyle,data:[]},{name:"累计死亡",type:"bar",stack:"one",emphasis:this.emphasisStyle,data:[]}]}}},watch:{"$store.state.mainModule.shouldProvinceDataShown":function(){1==this.$store.state.mainModule.shouldProvinceDataShown&&(this.drawProvinceBar("provinceBar"),this.drawProvinceTable(),this.drawProvincePie("provincePie"),this.$store.commit("mainModule/resetFlag"))},"$route.query.provinceName":function(){this.$store.dispatch("mainModule/getInstantProvinceData",this.$route.query.provinceName),this.$store.dispatch("mainModule/getProvincePolicy",this.$route.query.provinceName)},"$store.state.mainModule.timelineText":function(){this.timeStamp=this.$store.state.mainModule.timeStamp,this.timelineTitle=this.$store.state.mainModule.timeStamp,this.timelineText=this.$store.state.mainModule.timelineText}},methods:{drawProvinceBar:function(t){console.log("draw map");for(var e=0;e<this.$store.state.mainModule.provinceData.cities.length;e++)this.barOption.xAxis.data.push(this.$store.state.mainModule.provinceData.cities[e].cityName),this.barOption.series[0].data.push(this.$store.state.mainModule.provinceData.cities[e].currentConfirmedCount),this.barOption.series[1].data.push(this.$store.state.mainModule.provinceData.cities[e].curedCount),this.barOption.series[2].data.push(this.$store.state.mainModule.provinceData.cities[e].deadCount);this.provinceBar=S.a.init(document.getElementById(t)),this.provinceBar.setOption(this.barOption)},drawProvinceTable:function(){this.provinceTable=[{name:"现存确诊病例",value:this.$store.state.mainModule.provinceData.currentConfirmedCount},{name:"累计确诊病例",value:this.$store.state.mainModule.provinceData.confirmedCount},{name:"累计疑似病例",value:this.$store.state.mainModule.provinceData.suspectedCount},{name:"累计治愈病例",value:this.$store.state.mainModule.provinceData.curedCount},{name:"累计死亡病例",value:this.$store.state.mainModule.provinceData.deadCount}]},drawProvincePie:function(t){console.log("draw pie"),this.pieOption.series[0].data=[];for(var e=0;e<this.$store.state.mainModule.provinceData.cities.length;e++)this.pieOption.series[0].data.push({value:this.$store.state.mainModule.provinceData.cities[e].confirmedCount,name:this.$store.state.mainModule.provinceData.cities[e].cityName});this.pieOption.series[0].data.sort((function(t,e){return t.value-e.value})),this.provincePie=S.a.init(document.getElementById(t)),this.provincePie.setOption(this.pieOption)}},created:function(){console.log("create Province"),this.startTime=(new Date).getTime(),this.$store.dispatch("mainModule/getInstantProvinceData",this.$route.query.provinceName)},destroyed:function(){var t=(new Date).getTime();this.$store.dispatch("mainModule/recordCountTime","province",t)}},j=_,B=(a("b2ae"),Object(l["a"])(j,N,O,!1,null,null,null)),k=B.exports;n["default"].use(p["a"]);var L=new p["a"]({mode:"history",routes:[{path:"/",name:"Main",component:w},{path:"/nation",name:"Nation",component:P},{path:"/province",name:"Province",component:k}]}),A=L,I=(a("c975"),a("bc3a")),E=a.n(I),F={urlPref:"https://lab.isaaclin.cn/nCoV/api",nationData:[],provinceData:[],provinceCount:34,shouldNationDataShown:!1,shouldProvinceDataShown:!1,shouldPolicyDataShown:!1,shouldTotalDataShown:!1,chinaIndex:0,chinaData:null,startDay:24,startMonth:0,timeStamp:[],timelineText:[],currentProvince:"",carouselData:[],confirmedLine:[],curedLine:[],deadLine:[],xAxis:[],provinceNameEng:["Hebei","Shanxi","Liaoning","Jilin","Heilongjiang","Jiangsu","Zhejiang","Anhui","Fujian","Jiangxi","Shandong","Henan","Hubei","Hunan","Guangdong","Hainan","Sichuan","Guizhou","Yunnan","Shanxi","Gansu","Qinghai","Taiwan","Neimenggu","Guangxi","Xizang","Ningxia","Xinjiang","Beijing","Tianjin","Shanghai","Chongqing","Hong Kong","Macau"],provinceName:["河北","山西","辽宁","吉林","黑龙江","江苏","浙江","安徽","福建","江西","山东","河南","湖北","湖南","广东","海南","四川","贵州","云南","陕西","甘肃","青海","台湾","内蒙古","广西","西藏","宁夏","新疆","北京","天津","上海","重庆","香港","澳门"]},H={getTotalData:function(t,e){t.shouldTotalDataShown=!1,t.chinaData=e,t.shouldTotalDataShown=!0,console.log(t.shouldTotalDataShown)},getNationData:function(t,e){t.nationData=[];for(var a=0;a<e.length;a++)t.nationData.push({provinceShortName:e[a].provinceShortName,currentConfirmedCount:e[a].currentConfirmedCount,confirmedCount:e[a].confirmedCount});t.shouldNationDataShown=!0},getInstantProvinceData:function(t,e){t.provinceData=[];var a=[];if(e.cities.length>0)for(var n=0;n<e.cities.length;n++)a.push({cityName:e.cities[n].cityName,currentConfirmedCount:e.cities[n].currentConfirmedCount,confirmedCount:e.cities[n].confirmedCount,suspectedCount:e.cities[n].suspectedCount,curedCount:e.cities[n].curedCount,deadCount:e.cities[n].deadCount});else a.push({cityName:e.provinceShortName,currentConfirmedCount:e.currentConfirmedCount,confirmedCount:e.confirmedCount,suspectedCount:e.suspectedCount,curedCount:e.curedCount,deadCount:e.deadCount});t.provinceData={provinceShortName:e.provinceShortName,currentConfirmedCount:e.currentConfirmedCount,confirmedCount:e.confirmedCount,suspectedCount:e.suspectedCount,curedCount:e.curedCount,deadCount:e.deadCount,cities:a},t.shouldProvinceDataShown=!0},getProvincePolicy:function(t,e){t.timeStamp=[],t.timelineText=[];for(var a=0;a<e.length;a+=7){for(var n=a,i=new Date(e[n].date),o=i.getMonth()+1+"月"+i.getDate()+"日",r=[];n<a+7&&n<e.length;n++)if(e[n].policy.length>1){var s="等"+e[n].policy.length+"条",l=new Date(e[n].date),c=l.getMonth()+1+"月"+l.getDate()+"日：";r.push(c+e[n].policy[0].title+" "+s)}var u=new Date(e[n-1].date),d=u.getMonth()+1+"月"+u.getDate()+"日";r.length>0&&(t.timelineText.push(r),t.timeStamp.push(o+"-"+d))}},resetFlag:function(t){1==t.shouldNationDataShown&&(t.shouldNationDataShown=!1),1==t.shouldProvinceDataShown&&(t.shouldProvinceDataShown=!1)}},q={recordCountTime:function(t,e,a){E.a.get("/pi/myapi/record",{params:{page:e,time:a}}).catch((function(t){console.log("error in recordCountTime. err message",t)}))},setTraffic:function(t){E.a.get("/pi/myapi/traffic").catch((function(t){console.log("error in setTraffic. err message",t)}))},getInstantNationData:function(t){E.a.get("pi/myapi/nation").then((function(e){t.commit("getNationData",e.data.results)})).catch((function(t){console.log("error in getNationData. err message",t)})),E.a.get("/pi/myapi/total").then((function(e){t.commit("getTotalData",e.data)}))},getInstantProvinceData:function(t,e){var a="/area?latest=1&provinceEng="+F.provinceNameEng[F.provinceName.indexOf(e)];E.a.get(F.urlPref+a).then((function(e){t.commit("getInstantProvinceData",e.data.results[0])})).catch((function(t){console.log("error in getProvinceData. err message",t)}))},getProvincePolicy:function(t,e){var a=new Date,n=a.getMonth(),i=a.getDate(),o="/vi/api/policy?provinceName="+e+"&startMonth=0&startDate=24&endMonth="+n+"&endDate="+i;E.a.get(o).then((function(e){t.commit("getProvincePolicy",e.data.data)})).catch((function(t){console.log("error in getPolicy. err message",t)}))}},V={namespaced:!0,state:F,mutations:H,actions:q};n["default"].use(h["a"]);var z=function(){return new h["a"].Store({modules:{mainModule:V}})},J=z,X=a("ec7e"),G=a.n(X),R=a("28dd");n["default"].config.productionTip=!1,n["default"].use(m.a),n["default"].use(h["a"]),n["default"].use(G.a),n["default"].use(R["a"]),new n["default"]({store:J,router:A,render:function(t){return t(u)}}).$mount("#app")},"85ec":function(t,e,a){},"8c69":function(t,e,a){},b2ae:function(t,e,a){"use strict";var n=a("8c69"),i=a.n(n);i.a},c266:function(t,e,a){"use strict";var n=a("3a7d"),i=a.n(n);i.a},fcdd:function(t,e,a){"use strict";var n=a("567d"),i=a.n(n);i.a}});
//# sourceMappingURL=app.e4df7fdd.js.map